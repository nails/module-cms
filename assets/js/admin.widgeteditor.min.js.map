{"version":3,"sources":["admin.widgeteditor.js"],"names":["NAILS_Admin_CMS_WidgetEditor","base","this","widgets","actions","label","type","callback","widgetData","activeArea","getActiveData","close","container","sections","isOpen","defaultArea","searchTimeout","searchDelay","__construct","log","generateMarkup","bindEvents","loadSidebarWidgets","done","renderSidebarWidgets","item","$","addClass","header","text","search","body","html","widget","attr","append","renderActions","warn","actionIndex","groupIndex","on","data","call","hasClass","removeClass","toggleClass","_nails_admin","localStorage","set","clearTimeout","setTimeout","term","find","val","trim","searchWidgets","domElement","closest","getWidget","confirm","remove","callbacks","removed","slug","serializeObject","empty","setupWidgetEditor","deferred","i","x","key","assetsCss","assetsJs","Deferred","_nails_api","controller","method","success","length","hasOwnProperty","Function","assets","css","js","resolve","error","reject","toggle","icon","hidden","get","keywords","regex","group","each","split","RegExp","test","addAction","push","removeAction","action","show","area","widgetDom","addWidget","draggableConstruct","sortableConstruct","draggableDestroy","sortableDestroy","trigger","draggable","helper","connectToSortable","appendTo","zIndex","sortable","placeholder","handle","axis","start","e","ui","height","outerHeight","destroyWysiwyg","receive","sourceWidget","targetWidget","widgetSlug","removeAttr","stop","buildWysiwyg","Mustache","render","getWidgetEditor","_nails","addStripes","initSelect2","initToggles","initTipsy","dropped","fail","editor","_data","JSON","parse","responseText","status","promise","getAreaData","setAreaData","out","message","title","dialog","resizable","modal","dialogClass","buttons","OK","Cancel","payload","console","undefined"],"mappings":"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","file":"admin.widgeteditor.min.js"}