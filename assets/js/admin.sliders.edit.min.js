var NAILS_Admin_CMS_Sliders_Create_Edit;NAILS_Admin_CMS_Sliders_Create_Edit=function(){var e=this;return e.settingImgFor=null,e.schemeServe="",e.schemeThumb="",e.schemeScale="",e.managerUrl="",e.__construct=function(){$("#addSlide").on("click",function(){return e.addSlide(),!1}),$(document).on("click",".btnSetImg",function(){return e.setImg($(this)),!1}),$(document).on("click",".btnRemoveImg",function(){return e.removeImg($(this)),!1}),$(document).on("click",".btnRemoveSlide",function(){return e.removeSlide($(this)),!1}),$("#slides tbody").sortable({handle:".sortHandle",axis:"y",start:function(e,t){t.placeholder.height(t.helper.outerHeight())}})},e.addSlides=function(t){for(var n in t)t.hasOwnProperty(n)&&e.addSlide(t[n])},e.addSlide=function(t){var n;n=$("#templateSlideRow").html(),n=Mustache.render(n,t),$("#slides tbody").append(n),e.fixCellWidth()},e.removeSlide=function(e){$("<div>").text("Are you sure you wish to remove this slide?").dialog({title:"Are you sure?",resizable:!1,draggable:!1,modal:!0,buttons:{OK:function(){e.closest("tr").remove(),$(this).dialog("close")},Cancel:function(){$(this).dialog("close")}}})},e.fixCellWidth=function(){$("#slides tbody tr td.caption").removeAttr("style");var e=$("#slides tbody tr td.caption:first").outerWidth()-1;$("#slides tbody tr td.caption").css("width",e)},e.setImg=function(t){e.settingImgFor=t;var n;n=e.managerUrl,n+=n.indexOf("?")>=0?"&isModal=1":"?isModal=1",$.fancybox.open({href:n,type:"iframe",iframe:{preload:!1},helpers:{overlay:{locked:!1}},beforeLoad:function(){$("body").addClass("noScroll")},afterClose:function(){e.settingImgFor=null,$("body").removeClass("noScroll")}})},e.setImgCallback=function(t,n,i){var o,r,s,d,a,l,c,m;o=e.settingImgFor.closest("td.image"),o.find("input").val(i),o.find("img").remove(),r=n.split("."),s={width:130,height:130,bucket:t,filename:r[0],extension:"."+r[1]},d=Mustache.render(e.schemeScale,s),a=$("<img>").attr("src",d),l={bucket:t,filename:r[0],extension:"."+r[1]},c=Mustache.render(e.schemeServe,l),m=$("<a>").attr("href",c).addClass("fancybox"),o.prepend(m.html(a)),o.find(".btnRemoveImg").removeClass("hidden")},e.removeImg=function(e){var t;t=e.closest("td.image"),t.find("img").remove(),t.find("input").val(""),t.find(".btnRemoveImg").addClass("hidden")},e.setScheme=function(t,n){switch(t){case"serve":e.schemeServe=n;break;case"thumb":e.schemeThumb=n;break;case"scale":e.schemeScale=n}},e.setManagerUrl=function(t){e.managerUrl=t},e.__construct()};
//# sourceMappingURL=admin.sliders.edit.min.js.map
